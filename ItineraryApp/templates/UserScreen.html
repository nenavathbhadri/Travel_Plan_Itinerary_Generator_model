{% extends "base.html" %}

{% load static %}

{% block title %}Dashboard â€” TravelMind{% endblock %}

{% block nav_items %}
<li><a href="{% url 'TravelPlan' %}" class="active">Plan a Trip</a></li>
<li><a href="{% url 'TripHistory' %}">My Trips</a></li>
<li><a href="{% url 'index' %}">Logout</a></li>
{% endblock %}

{% block content %}
<div class="dashboard-page">
  <div class="container">
    <!-- Dashboard Header -->
    <div class="dashboard-header page-enter">
      <div
        style="display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: var(--space-md);">
        <div>
          <h1>{% if username %}Welcome back, <span class="text-gradient">{{ username }}</span>!{% else %}<span
              class="text-gradient">Your Dashboard</span>{% endif %}</h1>
          <p class="welcome-text">{% if data and 'welcome' in data|lower %}You're all set to plan your next adventure.{%
            else %}Here are your travel plan results.{% endif %}</p>
        </div>
        <div class="dashboard-actions">
          <a href="{% url 'TravelPlan' %}" class="btn btn-primary">
            âœ¨ New Trip
          </a>
          <a href="{% url 'index' %}" class="btn btn-secondary">
            Logout
          </a>
        </div>
      </div>
    </div>

    {% if data %}
    <!-- Itinerary Results -->
    <div class="page-enter page-enter-delay-1">
      <div class="itinerary-content">
        {{ data|safe }}
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="page-enter page-enter-delay-2"
      style="display: flex; gap: var(--space-md); justify-content: center; margin-top: var(--space-2xl); flex-wrap: wrap;">
      <button onclick="window.print()" class="btn btn-secondary">
        ğŸ–¨ï¸ Print Itinerary
      </button>
      <a href="{% url 'TravelPlan' %}" class="btn btn-primary">
        âœ¨ Plan Another Trip
      </a>
    </div>

    <!-- Destination Images -->
    {% if images %}
    <div class="page-enter page-enter-delay-2" style="margin-top: var(--space-2xl);">
      <h3 style="margin-bottom: var(--space-lg);">ğŸ“¸ Destination Highlights</h3>
      <div class="gallery-grid">
        {% for img in images %}
        <div class="gallery-item card-hover-lift">
          <img src="{% static img %}" alt="Destination photo" loading="lazy">
        </div>
        {% endfor %}
      </div>
    </div>
    {% endif %}

    {% else %}
    <!-- Empty State -->
    <div class="card page-enter page-enter-delay-1"
      style="text-align: center; padding: var(--space-4xl) var(--space-2xl);">
      <div style="font-size: 4rem; margin-bottom: var(--space-lg);">ğŸŒ</div>
      <h3>No Itinerary Yet</h3>
      <p class="text-muted"
        style="margin-bottom: var(--space-xl); max-width: 400px; margin-left: auto; margin-right: auto;">
        Start planning your dream trip! Our AI will create a detailed, personalized itinerary just for you.
      </p>
      <a href="{% url 'TravelPlan' %}" class="btn btn-primary btn-lg btn-pulse">
        âœ¨ Plan Your First Trip
      </a>
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}